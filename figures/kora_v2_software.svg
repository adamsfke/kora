<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 900" style="background: white;">
  <defs>
    <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#34495e"/>
    </marker>
  </defs>

  <!-- Titel -->
  <text x="400" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#2c3e50">
    KORA-2 – Software-Spezifikation
  </text>
  <text x="400" y="55" text-anchor="middle" font-size="14" fill="#7f8c8d">
    Modelle, HAPI, SCI, TSF, ISR, Referenz-Simulator
  </text>

  <!-- Modell-Ebene -->
  <rect x="80" y="90" width="640" height="80" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="5"/>
  <text x="400" y="120" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    Modell-Ebene
  </text>
  <text x="400" y="145" text-anchor="middle" font-size="12" fill="white">
    Modelle &amp; Workflows – CFD • KI • Big-Data-Pipelines • Analytics
  </text>

  <!-- Pfeil 1 -->
  <path d="M 400 170 L 400 200" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="420" y="190" font-size="11" fill="#34495e">Modell → API</text>

  <!-- HAPI -->
  <rect x="80" y="210" width="640" height="80" fill="#1abc9c" stroke="#16a085" stroke-width="2" rx="5"/>
  <text x="400" y="240" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    HAPI – High-Level API
  </text>
  <text x="400" y="265" text-anchor="middle" font-size="12" fill="white">
    Deklarative Modellbeschreibung • deterministische Semantik • stabile Schnittstelle
  </text>

  <!-- Pfeil 2 -->
  <path d="M 400 290 L 400 320" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="420" y="310" font-size="11" fill="#34495e">API → Compiler</text>

  <!-- SCI -->
  <rect x="80" y="330" width="640" height="80" fill="#f39c12" stroke="#d68910" stroke-width="2" rx="5"/>
  <text x="400" y="360" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    SCI – Scheduling &amp; Compilation Interface
  </text>
  <text x="400" y="385" text-anchor="middle" font-size="12" fill="white">
    Scheduling Trees • statische Planung • TSF-Erzeugung aus HAPI/Modellen
  </text>

  <!-- Pfeil 3 -->
  <path d="M 400 410 L 400 440" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="420" y="430" font-size="11" fill="#34495e">SCI → TSF</text>

  <!-- TSF -->
  <rect x="80" y="450" width="640" height="80" fill="#9b59b6" stroke="#8e44ad" stroke-width="2" rx="5"/>
  <text x="400" y="480" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    TSF – Tensor Sequence Format
  </text>
  <text x="400" y="505" text-anchor="middle" font-size="12" fill="white">
    deterministische Sequenzen • Phasen • DMA-Fenster • vollständige Ausführungsbeschreibung
  </text>

  <!-- Pfeil 4 -->
  <path d="M 400 530 L 400 560" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="420" y="550" font-size="11" fill="#34495e">TSF → Ausführung</text>

  <!-- ISR -->
  <rect x="80" y="570" width="640" height="80" fill="#2ecc71" stroke="#27ae60" stroke-width="2" rx="5"/>
  <text x="400" y="600" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    ISR – Intermediate State Representation
  </text>
  <text x="400" y="625" text-anchor="middle" font-size="12" fill="white">
    Zustände • Hashes • Reproduzierbarkeits-Metriken (FP/SEQ/STATE)
  </text>

  <!-- Pfeil 5 -->
  <path d="M 400 650 L 400 680" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="420" y="670" font-size="11" fill="#34495e">ISR ↔ Laufzeit</text>

  <!-- Referenz-Simulator & Laufzeit -->
  <rect x="80" y="690" width="640" height="100" fill="#34495e" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="400" y="720" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    Referenz-Simulator &amp; Host-Laufzeit
  </text>
  <text x="400" y="745" text-anchor="middle" font-size="12" fill="white">
    Ausführung von TSF • Telemetrie • Golden Runs • Audit-Modus
  </text>
  <text x="400" y="765" text-anchor="middle" font-size="12" fill="white">
    Replay-basierte Debugging-Pfade über ISR (deterministischer Repro-Pfad)
  </text>

  <!-- Legende -->
  <rect x="80" y="820" width="20" height="14" fill="#3498db" stroke="#2980b9" stroke-width="1.5" rx="3"/>
  <text x="110" y="831" font-size="11" fill="#34495e">
    deterministischer Software-Stack (KORA-2)
  </text>
  <path d="M 360 828 L 390 828" stroke="#34495e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="420" y="831" font-size="11" fill="#34495e">
    Daten- &amp; Kontrollfluss
  </text>
</svg>
